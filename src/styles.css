:root {
  --bg1:#2d333b;
  --bg2:#3c434c;
  --card:#111b29;
  --card-got:#f8fbff;
  --card-locked:#000000;
  --text:#eaf6ff;
  --text-dark:#0b1a2c;
  --muted:#7fa0c7;
  --accent:#4de1ff;
  --metal-light:#eef0f3;
  --metal-mid:#9ba1aa;
  --metal-dark:#2e333a;
}
body {
  margin:0; font-family: "Yu Gothic UI", "Yu Gothic", "Meiryo", "Noto Sans JP", "Segoe UI", system-ui, -apple-system, sans-serif; color: var(--text);
  background:
    radial-gradient(circle at 50% 40%, rgba(90,100,110,0.12), transparent 34%),
    radial-gradient(circle at 50% 60%, rgba(60,70,80,0.10), transparent 40%),
    repeating-linear-gradient(0deg, rgba(255,255,255,0.015) 0 1px, transparent 1px 4px),
    repeating-linear-gradient(90deg, rgba(255,255,255,0.015) 0 1px, transparent 1px 4px),
    linear-gradient(180deg, #3c434c, #2d333b);
  background-color: #2d333b;
  min-height:100vh;
}
.wrap { max-width: 1180px; margin: 0 auto; padding: 30px 24px 60px; position:relative; }
h1 { font-size: 20px; margin: 0 0 16px; font-weight: 800; letter-spacing:.04em; color: var(--text); text-shadow: 0 0 14px rgba(77,225,255,.25); position:relative; z-index:2; }
.machine-shell { position: relative; padding: 42px 36px 56px; background: linear-gradient(180deg, #5a6068 0%, #3c4149 100%); border-radius: 22px; box-shadow: inset 0 1px 0 rgba(255,255,255,.4), inset 0 -4px 10px rgba(0,0,0,.35), 0 18px 32px rgba(0,0,0,.55), 0 0 30px rgba(0,0,0,.45); overflow: visible; }
.machine-shell::before, .machine-shell::after { content:""; position:absolute; left:0; right:0; border-radius: 18px; pointer-events:none; }
.machine-shell::before { top:-110px; height: 100px; width: 68%; margin: 0 auto; background: linear-gradient(180deg, #666e78 0%, #4a525c 60%, #353b44 100%); box-shadow: inset 0 1px 0 rgba(255,255,255,.35), inset 0 -3px 8px rgba(0,0,0,.4), 0 14px 22px rgba(0,0,0,.45); border: 1px solid rgba(0,0,0,.35); }
.machine-shell::after { bottom:-70px; height: 68px; width: 92%; margin: 0 auto; background: linear-gradient(180deg, var(--metal-dark) 0%, #1d2127 100%); box-shadow: inset 0 1px 0 rgba(255,255,255,.25), inset 0 -2px 6px rgba(0,0,0,.5), 0 -6px 12px rgba(0,0,0,.35); border: 1px solid rgba(0,0,0,.45); }
.hazard-bar { position:absolute; bottom:-38px; left:50%; transform: translateX(-50%); width: 320px; height: 18px; border-radius: 6px; background: repeating-linear-gradient(135deg, #f7c500 0 14px, #22252b 14px 26px); box-shadow: inset 0 1px 0 rgba(255,255,255,.4), 0 4px 10px rgba(0,0,0,.45); z-index:4; }
.side-panel { position:absolute; top:30px; bottom:30px; width: 72px; background: linear-gradient(180deg, var(--metal-light) 0%, #cfd3d8 45%, var(--metal-mid) 100%); border: 1px solid rgba(0,0,0,.35); box-shadow: inset 0 1px 0 rgba(255,255,255,.5), inset 0 -3px 6px rgba(0,0,0,.35); z-index:1; }
.side-panel.left { left:-40px; border-radius: 18px 0 0 18px; }
.side-panel.right { right:-40px; border-radius: 0 18px 18px 0; }
.side-window { position:absolute; top:20px; bottom:120px; left:12px; right:12px; background: linear-gradient(180deg, #4c525a 0%, #2f343c 100%); border-radius: 12px; box-shadow: inset 0 1px 0 rgba(255,255,255,.25), inset 0 -3px 8px rgba(0,0,0,.4); }
.panel { background: linear-gradient(180deg, #3b2a1c, #24140c); border: 1px solid rgba(255,140,0,.35); border-radius: 14px; padding: 20px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.05), 0 18px 32px rgba(0,0,0,.55), 0 0 22px rgba(255,140,0,.18); position: relative; overflow:hidden; z-index:3; }
.panel::before { content:""; position:absolute; inset:0; background: repeating-linear-gradient(0deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 3px); mix-blend-mode: screen; opacity:.6; pointer-events:none; }
.monitor-bar { background: linear-gradient(180deg, rgba(80,40,15,0.9), rgba(45,24,10,0.9)); border: 1px solid rgba(255,140,0,.35); border-radius: 12px; padding: 12px 14px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.05), 0 0 18px rgba(255,140,0,.15); display:flex; gap:12px; flex-wrap: wrap; align-items:center; }
.monitor-btn { position: relative; padding: 11px 16px; border: 1px solid rgba(255,140,0,.75); background: linear-gradient(180deg, rgba(255,180,90,.55), rgba(255,140,0,.30)); color: var(--text); font-weight: 800; letter-spacing:.05em; cursor:pointer; border-radius: 10px; box-shadow: 0 0 12px rgba(255,140,0,.35), inset 0 1px 0 rgba(255,255,255,.18); text-transform: uppercase; transition: transform .08s ease, box-shadow .08s ease; }
.monitor-btn:hover { transform: translateY(-1px); box-shadow: 0 0 18px rgba(255,140,0,.55), inset 0 1px 0 rgba(255,255,255,.2); }
.monitor-btn:active { transform: translateY(0); box-shadow: 0 0 10px rgba(255,140,0,.4); }
.monitor-btn:disabled { opacity:.45; cursor:not-allowed; transform:none; box-shadow: 0 0 8px rgba(255,140,0,.2); }
.monitor-screen { position: relative; margin-top: 16px; padding: 18px; border-radius: 20px; background: linear-gradient(180deg, #6c747f, #2f333a); box-shadow: inset 0 3px 0 rgba(255,255,255,.35), inset 0 -4px 10px rgba(0,0,0,.45), 0 18px 40px rgba(0,0,0,.55); overflow:hidden; }
.monitor-bezel { position: relative; background: linear-gradient(180deg, #1c2028, #0f131a); border-radius: 14px; padding: 14px 14px 56px; border: 2px solid #0c0f15; box-shadow: inset 0 1px 0 rgba(255,255,255,.08), inset 0 -2px 6px rgba(0,0,0,.5), 0 0 0 1px rgba(0,0,0,.4); display:flex; flex-direction:column; gap:0; }
.monitor-bezel::before, .monitor-bezel::after { content:""; position:absolute; width:10px; height:10px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #fff, #9aa5b5 50%, #3a4450 80%); box-shadow: inset 0 1px 0 rgba(255,255,255,.4); }
.monitor-bezel::before { top:10px; left:10px; }
.monitor-bezel::after { top:10px; right:10px; }
.screen-inner { position: relative; border-radius: 10px; background: radial-gradient(circle at 20% 20%, rgba(77,225,255,.08), transparent 45%), radial-gradient(circle at 80% 30%, rgba(136,255,186,.06), transparent 45%), linear-gradient(180deg, rgba(12,20,31,.95), rgba(10,15,24,.96)); min-height: 420px; box-shadow: inset 0 0 0 1px rgba(255,255,255,.05), inset 0 0 0 2px rgba(0,0,0,.6); overflow:hidden; border: 3px solid #181c24; display:flex; align-items:center; justify-content:center; flex: 1 1 auto; width:100%; }
.screen-noise { position:absolute; inset:0; pointer-events:none; mix-blend-mode: screen; background-image: repeating-linear-gradient(0deg, rgba(255,255,255,0.12) 0 1px, transparent 1px 2px), repeating-linear-gradient(90deg, rgba(255,255,255,0.08) 0 1px, transparent 1px 3px), radial-gradient(circle at 20% 30%, rgba(255,255,255,0.12), transparent 42%), radial-gradient(circle at 80% 60%, rgba(255,255,255,0.08), transparent 46%); opacity:.72; animation: noiseScroll 1.2s linear infinite; }
@keyframes noiseScroll { 0% { background-position: 0 0, 0 0, 0 0; } 100% { background-position: 0 40px, 0 12px, 0 -24px; } }
.console { position:absolute; left:14px; right:14px; bottom:12px; height: 56px; background: linear-gradient(180deg, #1b2027, #0e1118); border: 1px solid rgba(0,0,0,.6); border-radius: 10px; box-shadow: inset 0 1px 0 rgba(255,255,255,.08), inset 0 -2px 5px rgba(0,0,0,.5); display:flex; align-items:center; gap:6px; padding: 6px 10px; }
.console .lamp { width:18px; height:18px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #fff, currentColor 55%, #111 100%); box-shadow: 0 0 8px currentColor, inset 0 1px 1px rgba(255,255,255,.5); }
.console .lamp.red { color:#e86a6a; }
.console .lamp.green { color:#7ee07a; }
.console .lamp.amber { color:#e6c05e; }
.console .lamp.blue { color:#63c7ff; }
.console .volume { display:flex; align-items:center; gap:8px; width: 190px; }
.console .volume label { font-size: 12px; color: var(--muted); }
.console input[type=range] { flex:1; -webkit-appearance: none; height:8px; border-radius: 6px; background: linear-gradient(180deg, #d1d6de, #8c94a0); box-shadow: inset 0 1px 0 rgba(255,255,255,.6), inset 0 -1px 2px rgba(0,0,0,.3); }
.console input[type=range]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width:16px; height:16px; border-radius:50%; background: linear-gradient(180deg, #6cc7ff, #2f6b9c); box-shadow: 0 2px 4px rgba(0,0,0,.4), inset 0 1px 0 rgba(255,255,255,.7); }
.console input[type=range]::-moz-range-thumb { width:16px; height:16px; border-radius:50%; background: linear-gradient(180deg, #6cc7ff, #2f6b9c); box-shadow: 0 2px 4px rgba(0,0,0,.4), inset 0 1px 0 rgba(255,255,255,.7); border: none; }
.console .toggle { padding:6px 10px; border-radius:8px; border:1px solid rgba(255,255,255,.15); background: linear-gradient(180deg, #2b313a, #1a1f27); color: var(--text); font-size: 12px; cursor:pointer; box-shadow: inset 0 1px 0 rgba(255,255,255,.18), 0 2px 6px rgba(0,0,0,.35); }
.result { position: relative; z-index: 1; display:flex; align-items:center; justify-content:center; min-height: 420px; padding: 14px; width:100%; }
.card { box-sizing: border-box; width: 100%; max-width: 720px; padding: 14px; border-radius: 12px; border: 1px solid rgba(77,225,255,.15); background: var(--card); color: var(--text); box-shadow: 0 12px 28px rgba(0,0,0,.25), inset 0 0 0 1px rgba(255,255,255,.04); transition: box-shadow .15s ease, transform .15s ease; }
.card.with-image { display:grid; grid-template-columns: 1fr; gap:12px; align-items: stretch; }
@media (min-width: 760px) { .card.with-image { grid-template-columns: 260px 1fr; } }
.card.got { background: var(--card-got); border-color: rgba(136,255,186,.35); box-shadow: 0 12px 30px rgba(0,0,0,.3); color: var(--text-dark); }
.history .card { position: relative; box-sizing: border-box; width:100%; max-width:none; transition: transform .15s ease, box-shadow .15s ease, border-color .15s ease; cursor:pointer; }
.history .card:hover { transform: translateY(-2px); box-shadow: 0 16px 30px rgba(0,0,0,.35), inset 0 0 0 1px rgba(77,225,255,.22); border-color: rgba(77,225,255,.25); }
.card.locked { background: var(--card-locked); border-color: rgba(255,255,255,.06); color:#dfe5f0; box-shadow: 0 10px 24px rgba(0,0,0,.35); }
.thumb { border-radius: 10px; overflow: visible; background: linear-gradient(145deg, #182330, #0f1824); border: 1px solid rgba(77,225,255,.18); display:flex; align-items:center; justify-content:center; padding: 6px; }
.card.got .thumb { background: #fff; border-color: rgba(0,0,0,.08); }
.card.locked .thumb { background: #000; border-color:#222835; color:#7fa0c7; }
.thumb img { width: 100%; height: 320px; object-fit: contain; display:block; }
.thumb.small { width: 120px; height: 120px; padding: 5px; margin: 0 auto; }
.thumb.small img { max-height: 110px; width: 100%; height: 100%; object-fit: contain; }
.item { font-size: 16px; font-weight: 800; margin: 6px 0 6px; letter-spacing:.02em; }
.card.locked .item { color:#dfe5f0; }
.meta { margin-top: 8px; display:flex; gap:12px; flex-wrap: wrap; color: var(--muted); font-size: 12px; }
.dex-monitor { margin-top:22px; background: linear-gradient(180deg, #4a5565, #1a2230); border: 10px solid rgba(255,140,0,.55); border-radius: 16px; box-shadow: inset 0 3px 0 rgba(255,255,255,.18), 0 18px 40px rgba(0,0,0,.4); position:relative; }
.dex-header { padding: 10px 14px 6px; border-bottom: 1px solid rgba(255,255,255,.08); background: linear-gradient(180deg, rgba(255,180,90,.20), rgba(30,18,10,.45)); display:flex; align-items:flex-end; gap:12px; }
.tab-bar { display:flex; gap:6px; }
.tab-btn { position:relative; padding: 8px 16px; border: none; border-radius: 10px 10px 0 0; background: linear-gradient(180deg, #6d3a12, #3e1f0a); color: #f5d4b0; font-weight: 800; letter-spacing:.04em; box-shadow: 0 -1px 0 rgba(255,255,255,.08), 0 2px 8px rgba(0,0,0,.35); cursor:pointer; }
.tab-btn.active { background: linear-gradient(180deg, #d26a1a, #a84e0f); color: #fff6ec; box-shadow: 0 -1px 0 rgba(255,255,255,.12), 0 2px 10px rgba(0,0,0,.45); }
.tab-btn:hover { color:#eaf6ff; }
.dex-stats { margin-left:auto; font-size: 12px; font-weight: 800; letter-spacing:.04em; color: var(--muted); text-shadow: 0 0 8px rgba(77,225,255,.3); }
.dex-monitor .dex-stats { position:absolute; right:14px; bottom:10px; }
.tab-panel { display:none; }
.tab-panel.active { display:block; }
.tab-panel#tab-owned { position: relative; padding-top: 56px; overflow: visible; }
.dex-body.owned-no-scroll { overflow: hidden !important; }
.dex-body.owned-no-scroll::-webkit-scrollbar { display:none; }
.count-badge { position:absolute; right:10px; bottom:8px; background: rgba(0,0,0,.65); color:#fff; font-size: 11px; padding: 4px 8px; border-radius: 999px; border:1px solid rgba(255,255,255,.18); box-shadow: 0 2px 6px rgba(0,0,0,.35); }
.card.got .count-badge { background: rgba(24,50,70,.8); border-color: rgba(77,225,255,.35); }
.card.locked .count-badge { background: rgba(0,0,0,.8); }
.owned-stack { position:relative; min-height: 320px; padding: 0 12px 12px; display:flex; align-items:flex-end; justify-content:flex-start; }
.owned-stack .owned-title { position:absolute; top:0px; left:20px; right:20px; height:28px; display:flex; align-items:center; color: var(--text); font-weight: 800; letter-spacing:.04em; text-shadow: 0 0 10px rgba(77,225,255,.25); }
.owned-stack .stack-area { position:relative; height:230px; width:100%; overflow-x:auto; overflow-y:hidden; padding:56px 16px 28px; scrollbar-width: thin; }
.owned-stack .stack-area::-webkit-scrollbar { height: 10px; }
.owned-stack .stack-area::-webkit-scrollbar-track { background: rgba(255,255,255,0.08); border-radius: 999px; }
.owned-stack .stack-area::-webkit-scrollbar-thumb { background: rgba(77,225,255,0.45); border-radius: 999px; }
.owned-stack .stack-card { position:absolute; top:20px; left:20px; width:160px; height:190px; border-radius:12px; border:1px solid rgba(77,225,255,.18); background: #fff; box-shadow: 0 10px 20px rgba(0,0,0,.32); display:flex; align-items:center; justify-content:center; transition: box-shadow .12s ease; overflow: visible; }
.owned-stack .stack-card img { max-width:90%; max-height:90%; object-fit: contain; background:#fff; }
.owned-stack .stack-card:hover { transform: none; box-shadow: 0 10px 18px rgba(0,0,0,.30), 0 0 0 1px rgba(77,225,255,.20); z-index:9; }
.dex-body { max-height: 360px; overflow-y: auto; padding: 16px; background: linear-gradient(180deg, rgba(12,20,31,.95), rgba(10,15,24,.96)); }
.dex-body::-webkit-scrollbar { width: 8px; }
.dex-body::-webkit-scrollbar-thumb { background: rgba(77,225,255,.35); border-radius: 8px; }
.dex-body::-webkit-scrollbar-track { background: rgba(255,255,255,.05); }
.history { margin-top: 0; position:relative; z-index:1; }
.list { display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
.history-row { position: relative; display:grid; gap:8px; align-items:flex-start; }
.small { font-size: 12px; color: var(--muted); }
.card.locked .small { color:#97a4ba; }
.badge { display:inline-block; padding: 3px 8px; border-radius: 999px; font-size: 11px; font-weight: 700; letter-spacing:.03em; }
.badge.got { background: rgba(136,255,186,.18); border:1px solid rgba(136,255,186,.5); color:#0d4224; }
.badge.locked { background: rgba(77,225,255,.12); border:1px solid rgba(77,225,255,.35); color:#c9e8ff; }
.actions { margin-top: 8px; display:flex; gap:6px; flex-wrap: wrap; font-size: 12px; }
.actions a, .actions button { color: #0f6bdc; text-decoration: none; border:1px solid #7ac0ff; padding:6px 10px; border-radius:8px; background:#eef6ff; font-weight:700; box-shadow: inset 0 1px 0 #fff; cursor:pointer; }
.actions a:hover, .actions button:hover { background: #d9ecff; }
.stats { color: var(--muted); font-size: 12px; font-weight: 700; letter-spacing:.02em; text-shadow: 0 0 8px rgba(77,225,255,.2); }
@keyframes drawPulse { 0% { transform: scale(0.98); box-shadow: 0 0 0 0 rgba(77,225,255,.5); } 40% { transform: scale(1.01); box-shadow: 0 0 0 12px rgba(77,225,255,.0); } 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(77,225,255,.0); } }
.draw-anim { animation: drawPulse .85s ease; }
.modal { position: fixed; inset:0; background: rgba(0,0,0,0.6); display: none; align-items: center; justify-content: center; z-index: 999; }
.modal.show { display:flex; animation: modalIn .25s ease; }
.modal-content { max-width: min(90vw, 900px); max-height: min(90vh, 900px); background: #0b0f18; border: 2px solid rgba(77,225,255,.4); border-radius: 12px; padding: 10px; box-shadow: 0 16px 40px rgba(0,0,0,.6), 0 0 24px rgba(77,225,255,.25); transform: scale(0.96); animation: popIn .25s ease forwards; }
.modal-content img { width: 100%; height: 100%; object-fit: contain; display:block; background: #fff; }
@keyframes popIn { from { transform: scale(0.9); opacity:0; } to { transform: scale(1); opacity:1; } }
@keyframes modalIn { from { background: rgba(0,0,0,0); } to { background: rgba(0,0,0,0.6); } }
.ground { height: 120px; background: #fff; }
@keyframes shakeX { 0% { transform: translateX(0); } 25% { transform: translateX(-6px); } 50% { transform: translateX(6px); } 75% { transform: translateX(-6px); } 100% { transform: translateX(0); } }
.history .card.shake { animation: shakeX 0.32s ease; }
.canvas-blank { width: 100%; min-height: 420px; background: #fff; border: 0; border-radius: 14px; box-shadow: none; display:flex; align-items:center; justify-content:center; color:#2b313a; font-weight:800; letter-spacing:.04em; }

.dex-body { overscroll-behavior: contain; }
.owned-stack .stack-area { overscroll-behavior: contain; }


.result.canvas-mode { display:flex; align-items:center; justify-content:center; padding: 14px; min-height: 420px; height: auto; position: relative; width:100%; }
.result.canvas-mode .canvas-blank { width: 100%; height: auto; min-height: 420px; display:flex; align-items:center; justify-content:center; position:relative; padding:0; background:#fff; border:0; box-shadow:none; }

.screen-inner.canvas-mode {
  background: #ffffff;
  border-color: #d6dce5;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.04), inset 0 0 0 2px rgba(0,0,0,0.08), 0 10px 26px rgba(0,0,0,0.28);
  display: flex;
  align-items: center;
  justify-content: center;
  flex: 0 0 auto;
  width:100%;
}
.screen-inner.canvas-mode .canvas-blank { background: #fff; border: 0; box-shadow: none; }


.canvas-board { position: relative; width: 100%; min-height: 420px; background: #ffffff; border-radius: 8px; border: 0; margin: 0 auto; }
.canvas-item { position: absolute; padding: 0; background: transparent; border: none; box-shadow: none; transform: translate(-50%, -50%) scale(var(--scale, 1)); transform-origin: center center; }
.canvas-item img { display: block; width: auto; height: auto; max-width: 260px; max-height: 260px; object-fit: contain; background: transparent; border-radius: 0; }
.canvas-caption { margin-top: 6px; font-size: 12px; font-weight: 700; color: #2b313a; text-align: center; }
.canvas-hint { position: absolute; inset: 0; display: flex; flex-direction: column; align-items: stretch; justify-content: flex-start; gap: 8px; color: #5a6575; font-weight: 700; letter-spacing: .04em; }











.canvas-guide { position:absolute; pointer-events:none; opacity:0.65; filter: drop-shadow(0 8px 12px rgba(0,0,0,0.25)); }

.canvas-guide img { display:block; max-width:260px; max-height:260px; object-fit: contain; background: transparent; }

.canvas-item.selected { outline: 2px solid rgba(77,225,255,0.8); box-shadow: 0 0 12px rgba(77,225,255,0.45); }

.owned-selected-name { position:absolute; top:0px; left:16px; right:16px; padding: 4px 8px; font-weight: 800; color: var(--text); letter-spacing: .02em; min-height: 22px; pointer-events:none; }
.owned-selected-stats { position:absolute; top:30px; left:16px; right:16px; padding: 0 8px; font-size: 12px; color: var(--muted); pointer-events:none; }



.stat-row { display:flex; align-items:center; gap:6px; }
.stat-led { display:inline-flex; align-items:center; gap:6px; font-weight:700; }
.stat-led .dot { width:16px; height:16px; border-radius:50%; box-shadow: 0 0 8px currentColor, inset 0 1px 1px rgba(255,255,255,.5); background: radial-gradient(circle at 30% 30%, #fff, currentColor 55%, #111 100%); }
.stat-led.red { color:#e86a6a; }
.stat-led.orange { color:#e6c05e; }
.stat-led.green { color:#7ee07a; }
.stat-led.cyan { color:#63c7ff; }

.owned-stack .stack-card:hover::after {
  content: "";
  position: absolute;
  left: -4px;
  right: -4px;
  bottom: -30px;
  height: 30px;
  pointer-events: auto;
}
.battle-mode {
  background: #ffffff;
  border-color: #d6dce5;
  box-shadow: inset 0 0 0 1px rgba(0,0,0,0.04), inset 0 0 0 2px rgba(0,0,0,0.08), 0 10px 26px rgba(0,0,0,0.28);
}
.battle-wrap { position: relative; width: 100%; min-height: 420px; display: flex; align-items: center; justify-content: center; color: #2b313a; font-weight: 800; letter-spacing: .04em; }
.battle-text { padding: 12px 16px; background: rgba(0,0,0,0.04); border-radius: 12px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.6), 0 6px 14px rgba(0,0,0,0.2); }
.battle-preview {
  position: absolute;
  left: 12px;
  bottom: 12px;
  width: 40%;
  height: 40%;
  min-width: 200px;
  min-height: 200px;
  border: none;
  border-radius: 4px;
  overflow: hidden;
  box-shadow: none;
  background: #ffffff;
}
.battle-mini-board { position: relative; width: 100%; height: 100%; background: #ffffff; overflow: hidden; }
.battle-mini-scale { position:absolute; inset:0; width:400%; height:400%; transform: scale(0.25); transform-origin: top left; }
.battle-mini-item { position: absolute; width: auto; height: auto; max-width: 260px; max-height: 260px; object-fit: contain; transform: translate(-50%, -50%); background: transparent; }

.battle-mini-scene { position: relative; width: 100%; height: 100%; }





.battle-scene { position: relative; width: 100%; min-height: 420px; height: 420px; background: #ffffff; border-radius: 8px; overflow: hidden; margin: 0 auto; box-shadow: inset 0 1px 0 rgba(0,0,0,0.05); display:flex; align-items:center; justify-content:flex-start; }
.battle-item { position: absolute; padding: 0; transform: translate(-50%, -50%) scale(var(--scale, 1)); transform-origin: center center; }
.battle-item img { display: block; max-width: 260px; max-height: 260px; object-fit: contain; background: transparent; }



.canvas-item .resize-handle { position:absolute; bottom:-6px; right:-6px; width:14px; height:14px; border-radius:3px; background: rgba(77,225,255,0.9); border:1px solid #0b1a2c; cursor: se-resize; opacity:0; transition: opacity .12s; }
.canvas-item.selected .resize-handle { opacity:1; }
















.battle-clip { position: relative; width: 100%; height: 100%; overflow: hidden; pointer-events: none; }
.battle-clip::after { content:""; position:absolute; inset:0; border:2px dashed rgba(77,225,255,0.6); border-radius:8px; pointer-events:none; box-shadow: 0 0 0 1px rgba(0,0,0,0.15); z-index:2; }







.battle-guide { position:absolute; border:3px solid rgba(255,140,0,0.85); border-radius:10px; box-shadow: inset 0 0 0 2px rgba(12,25,38,0.55), 0 0 0 1px rgba(0,0,0,0.25), 0 0 14px rgba(255,140,0,0.35); background: linear-gradient(180deg, rgba(255,200,120,0.16), rgba(12,25,38,0.05)); pointer-events:none; z-index:2; }





.battle-clip.left-offset { transform: translateX(-25%); }

.canvas-battle-guide { position:absolute; pointer-events:none; border:2px dashed rgba(77,225,255,0.65); border-radius:8px; box-shadow: 0 0 0 1px rgba(0,0,0,0.15); inset:auto; }









.stat-hover-text { min-width: 100px; font-size: 12px; font-weight: 900; color: #ffe6c7; text-shadow: 0 0 8px rgba(255,140,0,.45); }


.battle-gauges { z-index:6; position:absolute; top:0px; right:-8px; left:auto; max-width:45%; display:flex; flex-direction:column; align-items:stretch; gap:6px; padding: 6px 8px; background: rgba(20,20,22,0.85); border-radius:10px; border:1px solid rgba(255,140,0,0.6); box-shadow: inset 0 1px 0 rgba(255,255,255,0.12), 0 6px 16px rgba(0,0,0,0.35); color:#ffe6c7; pointer-events:none; }
.gauge-row { display:flex; align-items:center; gap:6px; min-width: 100px; }
.gauge-label { font-size:13px; font-weight:900; color:#ffe6c7; width:78px; text-shadow: 0 0 6px rgba(0,0,0,0.5); }
.gauge-bar { position: relative; flex:1; height:12px; border-radius:999px; background: rgba(255,255,255,0.16); overflow:hidden; box-shadow: inset 0 1px 2px rgba(0,0,0,0.35); }
.gauge-fill { position:absolute; left:0; top:0; bottom:0; border-radius:999px; box-shadow: 0 0 8px currentColor; }
.gauge-fill.red { background: linear-gradient(90deg, #ff9a9a, #ff4d4d); color:#ff4d4d; }
.gauge-fill.orange { background: linear-gradient(90deg, #ffc27a, #ff8c1a); color:#ff8c1a; }
.gauge-fill.green { background: linear-gradient(90deg, #b7f5b7, #41c75c); color:#41c75c; }
.gauge-fill.cyan { background: linear-gradient(90deg, #b8ecff, #45b7ff); color:#45b7ff; }
.gauge-val { font-size:13px; font-weight:900; color:#ffe6c7; width:46px; text-align:right; text-shadow: 0 0 6px rgba(0,0,0,0.5); }
.stat-hover-text { min-width: 100px; font-size: 12px; font-weight: 900; color: #ffe6c7; text-shadow: 0 0 8px rgba(255,140,0,.45); }










.battle-start-btn {
  position: absolute;
  right: 12px;
  bottom: 12px;
  padding: 10px 16px;
  border-radius: 10px;
  border: 1px solid rgba(255,140,0,0.75);
  background: linear-gradient(180deg, rgba(255,200,120,0.9), rgba(255,140,0,0.7));
  color: #2b1a0f;
  font-weight: 900;
  letter-spacing: .04em;
  box-shadow: 0 6px 14px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.35);
  cursor: pointer;
}
.battle-start-btn:hover { box-shadow: 0 8px 18px rgba(0,0,0,0.4), inset 0 1px 0 rgba(255,255,255,0.5); transform: translateY(-1px); }
.battle-start-btn:active { transform: translateY(0); box-shadow: 0 4px 10px rgba(0,0,0,0.35); }
.battle-enemy {
  position: absolute;
  right: 12px;
  bottom: 12px;
  width: 140px;
  height: 140px;
  pointer-events: none;
}
.battle-enemy img { width: 100%; height: 100%; object-fit: contain; }

.gauge-row.human-gauge { margin-top: 4px; }


.gauge-row-set { display:flex; gap:6px; flex-wrap:nowrap; }
.human-meter { display:flex; align-items:center; gap:8px; width:100%; padding:2px 4px; }
.human-label { font-size:12px; font-weight:900; color:#ffe6c7; text-shadow:0 0 6px rgba(0,0,0,0.5); }
.human-bar { position:relative; flex:1; height:10px; border-radius:999px; background: rgba(255,255,255,0.16); box-shadow: inset 0 1px 2px rgba(0,0,0,0.35); overflow:hidden; }
.human-fill { position:absolute; left:0; top:0; bottom:0; border-radius:999px; background: linear-gradient(90deg, #ffc27a, #ff8c1a); box-shadow:0 0 8px #ff8c1a; }
.human-val { font-size:12px; font-weight:800; color:#ffe6c7; text-shadow:0 0 6px rgba(0,0,0,0.5); }


.canvas-count-badge { position:absolute; top:6px; right:10px; padding:4px 10px; border-radius:999px; background: rgba(15,15,18,0.85); color:#ffe6c7; font-weight:900; font-size:12px; border:1px solid rgba(255,140,0,0.7); box-shadow: 0 2px 8px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.15); z-index:5; }

.owned-selected-name { display:flex; flex-direction:column; gap:2px; }
.owned-rarity { font-size:12px; color:#f5c16c; font-weight:700; }
.owned-title { font-size:16px; font-weight:700; color:#eaf6ff; }
.draw-info { display:flex; flex-direction:column; gap:4px; }
.draw-rare-line { color:#f5c16c; font-weight:700; }
.skill-line { margin-top:4px; }
.stat-meta { margin-top:4px; display:flex; flex-direction:column; gap:2px; color:#eaf6ff; }
.owned-selected-stats { margin-top: 8px; }
.stat-row { margin-top: 4px; }
.enemy-hp { display:flex; align-items:center; gap:8px; margin:8px 0; }
.enemy-hp-bar { position: relative; width: 180px; height: 10px; border-radius: 6px; background: rgba(255,255,255,0.08); overflow: hidden; }
.enemy-hp-fill { position: absolute; left:0; top:0; bottom:0; background: linear-gradient(90deg, #ff7b7b, #d12b2b); }
.enemy-hp-text { font-size: 12px; color: #eaf6ff; font-weight: 700; }
.enemy-dmg { color: #ffd1d1; font-size: 12px; font-weight: 800; text-shadow: 0 0 6px rgba(0,0,0,0.4); }
.enemy-hp.hud { position:absolute; top:8px; right:12px; display:flex; align-items:center; gap:8px; background: rgba(0,0,0,0.35); padding:6px 8px; border-radius:8px; }
.enemy-hp.hud.hud-top { top: 8px; right: 12px; z-index: 5; }
.enemy-hp.hud { display:flex; align-items:center; gap:8px; background: rgba(0,0,0,0.35); padding:6px 8px; border-radius:8px; position:absolute; }
.enemy-hp.hud.hud-top-out { position:absolute; top:8px; right:12px; z-index: 8; }
.ally-hp.hud { position:absolute; display:flex; align-items:center; gap:8px; background: rgba(0,0,0,0.35); padding:6px 8px; border-radius:8px; }
.ally-hp.hud.hud-top-left { top:8px; left:12px; z-index:8; }
.ally-hp-bar { position: relative; width: 180px; height: 10px; border-radius: 6px; background: rgba(255,255,255,0.08); overflow: hidden; }
.ally-hp-fill { position: absolute; left:0; top:0; bottom:0; background: linear-gradient(90deg, #9cf0a0, #3ba55b); }
.ally-hp-text { font-size: 12px; color: #eaf6ff; font-weight: 700; }
.action-progress { position: relative; width: 120px; height: 6px; border-radius: 4px; background: rgba(255,255,255,0.1); overflow: hidden; margin-top: 4px; }
.action-fill { position:absolute; left:0; top:0; bottom:0; background: linear-gradient(90deg, #6cc7ff, #2f6b9c); }
.action-fill.enemy { background: linear-gradient(90deg, #ffaf7b, #d45a2b); }


.battle-hand { position:absolute; right:12px; bottom:12px; background: rgba(0,0,0,0.45); padding:8px 10px; border-radius:10px; box-shadow: 0 6px 12px rgba(0,0,0,.25); display:flex; flex-direction:column; gap:6px; max-width:240px; z-index:9; }
.battle-hand .hand-list { display:flex; flex-direction:column; gap:4px; max-height:120px; overflow:auto; }
.battle-hand .hand-card { background: rgba(255,255,255,0.08); border:1px solid rgba(255,255,255,0.12); border-radius:6px; padding:4px 6px; color:#eaf6ff; font-size:12px; }
.battle-hand .hand-name { font-weight:700; }
.battle-hand .hand-skill { font-size:11px; color:#cfe4ff; }
.battle-hand .hand-empty { color:#cfe4ff; font-size:12px; }
